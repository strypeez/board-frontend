(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{5215:function(e,t,s){Promise.resolve().then(s.bind(s,525))},5094:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437);function n(e){let{item:t,quantity:s}=e;return(0,a.jsxs)("div",{className:"flex mt-3",children:[(0,a.jsx)("img",{className:"w-16 h-16",src:t.thumbnail}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 grow",children:[(0,a.jsx)("h3",{className:"grow text-base-red font-bold",children:t.title}),(0,a.jsxs)("p",{className:"text-sm font-bold admin-order-quantity",children:["x",s]})]})]})}var r=s(2265),d=s(8472);function i(e){let{order:t,games:s}=e,[i,c]=(0,r.useState)(!1),[l,o]=(0,r.useState)(""),u=async function(){let e=t.cart.map(e=>({...e,oldQuantity:s[e.item].quantity}));try{await d.Z.put("https://board-backend-b9tn.onrender.com/orders/order/cancel/".concat(t._id),{cart:e,newOrder:{...t,state:"Cancelled"}})}catch(e){500===e.response.status&&o(e.response.data)}},m=async function(e){try{await d.Z.put("https://board-backend-b9tn.onrender.com/orders/order/".concat(t._id),{newOrder:e})}catch(e){500===e.response.status&&o(e.response.data)}};return(0,a.jsxs)("div",{children:[l&&(0,a.jsx)("div",{className:"admin-error",children:l}),(0,a.jsxs)("div",{className:"admin-order hover:drop-shadow-lg",children:[(0,a.jsxs)("div",{onClick:()=>{c(!i)},children:[(0,a.jsx)("div",{className:"admin-order-title",children:"Order No."}),(0,a.jsxs)("div",{className:"admin-order-number",children:[" ",t._id]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"admin-order-state",children:"Order State"}),(0,a.jsxs)("select",{className:"admin-order-state-select",disabled:"Cancelled"===t.state,onChange:e=>{"Cancelled"===e.target.value?u():m({...t,state:e.target.value})},defaultValue:t.state,children:[(0,a.jsx)("option",{value:"Preparing",children:"Preparing"}),(0,a.jsx)("option",{value:"Ready",children:"Ready"}),(0,a.jsx)("option",{value:"Cancelled",children:"Cancelled"}),(0,a.jsx)("option",{value:"Fulfilled",children:"Fulfilled"})]})]})]}),i&&(0,a.jsxs)("div",{className:"admin-order-items",children:[(0,a.jsx)("h2",{className:"admin-order-title font-bold",children:"Order Items"}),(0,a.jsx)("div",{children:t.cart.map(e=>(0,a.jsx)(n,{quantity:e.quantity,item:s[e.item]},e.item))})]})]})}},525:function(e,t,s){"use strict";s.d(t,{default:function(){return c}});var a=s(7437),n=s(2265),r=s(5094),d=s(4999),i=s(8472);function c(e){let{orderData:t,gamesData:s,orderError:c}=e,[l,o]=(0,n.useState)([]),[u,m]=(0,n.useState)({}),[h,x]=(0,n.useState)("");return(0,n.useEffect)(()=>{o(t),m(s||{}),x(c)},[t,s,c]),(0,n.useEffect)(()=>{let e=(0,d.ZP)("https://board-backend-b9tn.onrender.com");return e.on("NEW_ORDER",async e=>{try{let e=await i.Z.get("https://board-backend-b9tn.onrender.com/orders/");o(e.data.data)}catch(e){if(i.Z.isAxiosError(e)){var t;(null===(t=e.response)||void 0===t?void 0:t.status)===500&&x(e.response.data)}}}),()=>{e.off("disconnect"),e.disconnect()}},[]),(0,a.jsxs)("div",{className:"admin-page",children:[(0,a.jsx)("h1",{className:"admin-title",children:"Orders"}),h&&(0,a.jsx)("div",{className:"admin-error",children:h}),l.map(e=>(0,a.jsx)(r.Z,{games:u,order:e},e._id))]})}}},function(e){e.O(0,[300,472,999,971,23,744],function(){return e(e.s=5215)}),_N_E=e.O()}]);