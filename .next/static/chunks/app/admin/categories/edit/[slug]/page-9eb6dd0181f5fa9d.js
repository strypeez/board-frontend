(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{5495:function(e,t,s){Promise.resolve().then(s.bind(s,8830))},8444:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var i=s(7437),a=s(7138);function r(e){let{item:t,clickFunction:s,link:r}=e;return r?(0,i.jsx)(a.default,{className:"category-item",href:"/item/".concat(t._id),children:(0,i.jsxs)("div",{className:"w-48",children:[(0,i.jsx)("img",{className:"category-item-image",src:t.thumbnail}),(0,i.jsxs)("div",{className:"category-item-text",children:[(0,i.jsx)("h3",{className:"category-item-title",children:t.title}),(0,i.jsxs)("div",{className:"category-item-info",children:[t.quantity&&(0,i.jsxs)("p",{children:["qty: ",t.quantity]}),t.price&&(0,i.jsxs)("p",{className:"category-item-price",children:["$",t.price]})]})]})]})}):(0,i.jsxs)("div",{onClick:()=>{s(t._id)},className:"category-item",children:[(0,i.jsx)("img",{className:"category-item-image",src:t.thumbnail}),(0,i.jsxs)("div",{className:"category-item-text",children:[(0,i.jsx)("h3",{className:"category-item-title",children:t.title}),(0,i.jsxs)("div",{className:"category-item-info",children:[t.quantity&&(0,i.jsxs)("p",{children:["qty: ",t.quantity]}),t.price&&(0,i.jsxs)("p",{className:"category-item-price",children:["$",t.price]})]})]})]})}},8830:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var i=s(7437),a=s(842),r=s(8472),c=s(2265),n=s(6463);function l(e){let{params:t}=e,s=(0,n.useRouter)(),[l,o]=(0,c.useState)(""),d=async function(e){try{await r.Z.put("https://board-backend-b9tn.onrender.com/categories/category",{categoryId:t.slug,params:{...e}}),s.push("/admin/categories")}catch(e){if(r.Z.isAxiosError(e)){var i;(null===(i=e.response)||void 0===i?void 0:i.status)===500&&o(e.response.data)}}};return(0,i.jsxs)("div",{className:"p-5",children:[l&&(0,i.jsx)("div",{className:"admin-error",children:l}),(0,i.jsx)(a.Z,{action:"Edit",categoryId:t.slug,submitAction:e=>{d(e)}})]})}},842:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var i=s(7437),a=s(9343),r=s(2265),c=s(8444);function n(e){let{games:t,selectedGames:s,handleSelectedGames:a}=e,[n,l]=(0,r.useState)(""),[o,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{d(t.filter(e=>!s.includes(e._id)&&(""===n||e.title.includes(n))).map(e=>(0,i.jsx)(c.Z,{link:!1,item:e,clickFunction:e=>{a(e)}},e._id)))},[n,t,a,s]);let u=e=>{l(e.target.value)};return(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"admin-category-edit-form-title",children:"Selected Items"}),(0,i.jsxs)("div",{className:"mt-3 flex overflow-x-auto scroll-smooth",children:[0===s.length&&(0,i.jsx)("div",{className:"empty-selection",children:(0,i.jsx)("p",{children:"Looks like no games are selected"})}),0!==s.length&&t.filter(e=>s.includes(e._id)).map(e=>(0,i.jsx)(c.Z,{link:!1,item:e,clickFunction:e=>{a(e)}},e._id))]}),(0,i.jsx)("h2",{className:"admin-category-edit-form-title",children:"List of Games"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"search-title",children:"Search"}),(0,i.jsx)("input",{onChange:e=>{u(e)},className:"search-bar",type:"text"})]}),(0,i.jsxs)("div",{className:"category-form-games mt-3 flex overflow-x-auto scroll-smooth scroll-pb-8 snap-x",children:[0!==o.length&&o,0===o.length&&(0,i.jsx)("div",{className:"empty-selection",children:(0,i.jsx)("p",{children:"Looks like no games match"})})]})]})}var l=s(8983),o=s(682),d=s(8472);function u(e){let{submitAction:t,action:s,categoryId:c}=e,[u,m]=(0,r.useState)([]),[f,h]=(0,r.useState)(o.q),[x,g]=(0,r.useState)([]),[p,y]=(0,r.useState)("");(0,r.useEffect)(()=>{async function e(){try{let e=await d.Z.get("https://board-backend-b9tn.onrender.com/categories/category/".concat(c));h(e.data.data)}catch(t){if(d.Z.isAxiosError(t)){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===500&&y(t.response.data)}}}"Edit"===s&&e()},[t,s,c]),(0,r.useEffect)(()=>{(async function(){try{let e=await d.Z.get("https://board-backend-b9tn.onrender.com/games/");m(e.data.data)}catch(t){if(d.Z.isAxiosError(t)){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===500&&y(t.response.data)}}})()},[]);let{register:j,handleSubmit:N,watch:b,reset:v,formState:{errors:k}}=(0,a.cI)(),_=(0,r.useCallback)(async e=>{v(e)},[v]);return(0,r.useEffect)(()=>{_(f),g(f.items)},[f,_]),(0,i.jsxs)("div",{className:"admin-category-edit-form",children:[p&&(0,i.jsx)("div",{className:"admin-error",children:p}),!p&&(0,i.jsxs)("form",{className:"flex flex-col",onSubmit:N(e=>t({...e,_id:"new",items:x})),children:[(0,i.jsxs)("div",{className:"flex mb-3 justify-between items-center",children:[(0,i.jsxs)("h1",{className:"admin-category-edit-form-title",children:[" ",s," Category Form"]}),(0,i.jsx)("input",{type:"submit",className:"admin-button"})]}),(0,i.jsx)(l.Z,{type:"input",defaultValue:f.title,label:"Category Name",fieldName:"title",errors:k.title,register:j}),(0,i.jsx)(l.Z,{type:"input",defaultValue:f.description,label:"Category Description",fieldName:"description",errors:k.description,register:j}),(0,i.jsx)(n,{games:u,selectedGames:x,handleSelectedGames:e=>{if(x.includes(e)){let t=x.indexOf(e);g([...x.slice(0,t),...x.slice(t+1)])}else g([...x,e])}})]})]})}},8983:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(7437);function a(e){let t,{type:s,defaultValue:a,label:r,fieldName:c,errors:n,register:l}=e;return t="textarea"===s?(0,i.jsx)("textarea",{className:"admin-form-field border-black border-b",defaultValue:a,...l(c,{required:!0})}):(0,i.jsx)("input",{className:"admin-form-field border-black border-b",defaultValue:a,...l(c,{required:!0})}),(0,i.jsxs)("div",{className:"flex flex-col mb-3",children:[(0,i.jsx)("label",{className:"admin-form-field-title",children:r}),t,n&&(0,i.jsx)("span",{children:"This field is required"})]})}},682:function(e,t,s){"use strict";s.d(t,{q:function(){return i},u:function(){return a}});let i={_id:"0",title:"Default Category",description:"This is a default category",items:[]},a={_id:"0",title:"Default Game",description:"This is a default game",image:"image url",thumbnail:"image url",minPlayers:0,maxPlayers:4,playingTime:120,yearPublished:2024,price:0,quantity:0}},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var i=s(231),a=s.n(i)},6463:function(e,t,s){"use strict";var i=s(1169);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})}},function(e){e.O(0,[231,300,472,343,971,23,744],function(){return e(e.s=5495)}),_N_E=e.O()}]);